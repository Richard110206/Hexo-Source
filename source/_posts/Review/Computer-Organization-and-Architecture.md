---
title: Computer Organization and Architecture
date: 2025-11-29 21:49:43
tags: [Computer Science]
category: Review
category_bar: true
index_img: https://github.com/Richard110206/Blog-image/blob/main/cover/Computer%20Organization.jpg?raw=true
description: Based on textbooks and Bilibili lectures, a systematic review of core knowledge in Computer Organization and Architecture.
math: true
---

#### 浮点运算方法和浮点运算器

1. 零操作数检查
2. 比较阶码大小并完成对阶（小阶向大阶看齐）：对齐小数点，以便进行尾数的加减运算

尾数左移为什么会导致最高有效位的缺失，造成的误差较大

尾数右移最低有效位缺失，造成的误差较小，每右移一位，阶码加一，右移位数等于阶差

1. 尾数求和：与定点数加减法方法相同
2. 规格化处理：尾数右移实现规格化
3. 舍入处理：规格化后最低有效位丢失，会造成一定误差，要进行舍入处理 
   - 就近舍入
   - 朝0舍入
   - 朝+无穷舍入
   - 朝-无穷舍入
4. 判断溢出（考试的时候记得进行判断）
   - 阶码上溢
   - 阶码下溢
   - 尾数上溢
   - 尾数下溢

#### 浮点运算流水线

使各子任务能在流水线的各个阶段并发执行（实现计算机时间并行性）

子任务内部具有优先关系的叫做线性流水线

对于一个具有k级过程段的流水线处理n个任务需要的

采用流水线：$T_k=k+(n-1)$

不采用流水线：$T_L=n·k$

流水线加速比为二者的比值$C_k=T_L/T_k$，取limit极限，加速比为k



### 存储系统

#### 存储器三剑客：

- 主存（内存）：用来存放计算机运行期间所需要的程序和数据，CPU可以直接随机的进行读/写访问，存取速度快。

- 外存：用来存放暂时不参与运行的程序和数据，以及一些需要永久性保存的信息，容量极大，但存取速度低，cpu不能直接访问，信息必须调入主存后cpu才能使用，。

- cpu和主存之间还有高速缓冲存储器cache存放正在执行的程序段和数据，通常被放在cpu芯片中，存储容量小，价格高

#### 按存取方式分类

- 随机存储器ram
  - 优点：对ram人一单元的读写时间相同，与物理地址无关（类似数组） 
  - 缺点：一旦断电，ram失去存储信息
    - 静态sram：双稳态触发器，制造cache
    - 动态dram：mos管和电容，主存

- 只读存储器rom
  -  优点：断电之后不会丢失存储信息，适合存储固定程序和数据
  - 缺点：一经写入，之后只能读取，不能再次写入，里面的内容固定不变 
- 顺序存取存储器：磁带
  - 缺点：必须数着存储单元的物理地址顺序，顺次访问（串行访问）（类似链表）必须从前往后遍历才能找到需要访问的单元，存取时间与存取的物理地址相关
- 直接存取存储器dam：光盘（随机+顺序存取相结合）
  - 特点：先通过随机访问，确定一个较小的存储区域，在在这小区域内顺序查找
- 相联存储器：按照内容寻址，将所存的内容的某一部分作为检索项（关键字）去检索

#### 按断电后信息的可保存性分类

- 易失性存储器
- 非易失性存储器

####  按读出方式分类

- 破坏性读出：读出后若不加恢复则存储器存储的信息会丢失dram
- 非破坏性读出：不会丢失信息sram，rom



### 寻址

- 字节编址最小形式单位是一个字节，可以按字节。半字，字寻址
- 字编址最小心是单位是一个字，仅支持，按字寻址

1. 字节（Byte）：固定标准，1字节 = 8位（bit），全球统一。 
2. 不同机器字长的换算示例：   
   - 32位机器：1字 = 4字节（32位），1半字 = 2字节（16位）；   
   - 16位机器：1字 = 2字节（16位），1半字 = 1字节（8位）；   
   - 64位机器（通用）：1字 = 8字节（64位），1半字 = 4字节（32位）。

{%note info%}

机器字长是 CPU 的硬件属性，指 CPU 一次能处理的二进制数据位数（32 位 / 64 位）就比如我们知道的windows32位/64位系统：具体差异体现在：

- 寻址能力：32 位系统最大支持约 4GB 内存（受限于 32 位地址线寻址上限），64 位系统可支持远超 4GB（理论上达 16EB），多开软件、运行大型程序（如设计软件、游戏）时更不易卡顿。
- 软件兼容性：32 位系统无法运行 64 位软件，64 位系统可兼容运行大部分 32 位软件
- 运算性能：64 位 CPU 一次能处理更多数据，对复杂计算（如视频渲染、编程编译）的效率比 32 位更高，日常简单操作（聊天、浏览网页）差异不明显。

{%endnote%}

{%note info%}

1GB = 1024MB，1MB = 1024KB，1KB = 1024B

{%endnote%}

{%note danger%}

- 核心原则：“字” 的长度永远等于机器字长，“半字” 是 “字”
-  长度的一半，均以字节为最小单位换算。

{%endnote%}

### 存储速度

{%note info%} 

- 1 s（秒）= 10³ ms（毫秒）= 1000 ms
- 1 ms（毫秒）= 10³ μs（微秒）= 1000 μs
- 1 μs（微秒）= 10³ ns（纳秒）= 1000 ns

{%endnote%}

#### 访问时间

- 读出时间$T_A$
- 写入时间$T_W$

#### 存储周期

进行一次读写操作所需要的全部时间，就是存储器进行连续读写操作所允许的最短时间间隔

#### 存储带宽

表示存储器被连续访问时可以提供的数据传送速率 ，字节/秒

{%note info%}

- 存取时间：存储器从读出或者写入一次信息所需要的平均时间

- 存取周期：连续两次访问存储器之间所必需的最短时间间隔

{%endnote%}

### 存储介质

#### 磁存储器

存取速度慢，但成本低

#### 光存储器

用激光束照射盘面，靠盘面的不同反射率来读出数据，便于携带

#### 半导体存储器



### ram工作原理

存放一个二进制的物理器件叫做存储元，地址码相同的多个存储元构成一个存储单元，若干存储单元的集合构成存储体

- dram：用于主存，由mos管和电容组成，当电容存储的电荷数超过阈值（电量） ，电容所在的存储元表示1 
  - 写入：给高电压，mos管导通，充电
  - 读出：mos管导通，若电容有电，电流流出，通过外接信号放大器检测电容的电压信息，放电后需要再次充电进行恢复（破坏性读出）；漏电需要刷新 ，重新将电荷充满
- sram双稳态触发器（6个mos管）：存取速度按快，用于cache

| 特征       | SRAM         | DRAM       |
| ---------- | ------------ | ---------- |
| 构成       | 双稳态触发器 | 电容       |
| 破坏性读出 | 否           | 是         |
| 再生       | 不需要       | 需要       |
| 易失性     | 是           | 是         |
| 送行列地址 | 同时送       | 行列分开送 |
| 引脚数量   | 较多         | 较少       |
| 速度       | 快           | 慢         |
| 刷新       | 不需要       | 需要       |
| 集成度     | 低           | 高         |
| 功耗       | 高           | 低         |
| 价格       | 高           | 低         |



#### 线选法

$n$个地址引脚定义$2_n$的地址空间，

- 缺点：译码后输出端的线数量过多

#### 重合法

双译码法 ：类似笛卡尔坐标系，实数对确定唯一的存储单元，有n跟引脚的情况下嘛，有n/2个行、列地址线，输出的引脚数量只需要2——（n/2）+1（适用于大容量动态存储容器）

dram使用行列地址复用技术：重合法时分先后两次将存储矩阵的行地址和列地址传入译码驱动电路，从而可以将地址线的数量减半 

sram行列独立技术

dram 以行为单位进行刷新，电荷周期为10-64ms，若不及时刷新则会丢失存储的数据

刷新时，dram不能响应cpu的访问，所以cpu访问内存和内存的控制器刷新操作存在内存争用

存储周期（用 t_c 表示）是指：CPU 向存储器发出一个读写命令后，存储器完成数据读写、并恢复到 “可以接收下一个读写命令” 的最短时间。


#### 集中刷新

前面周期都用来进行读写或者保持工作，后面集中进行刷新

- 优点：读写操作期间不受刷新操作的影响，速度较快
- 缺点：存在较长的死区时间，集中在刷新的读写周期内，cpu较长时间不能访问存储器，行数越多，死区时间越长

#### 分散刷新

将存储周期变为t_c‘变为t_c+t_r（变相增长存储周期）对于每个存储周期前半段用来进行读写或者保持操作，后半段用来刷新

- 优点：不存在长时间的“死区”
- 缺点：刷新过于频繁，严重影响系统的速度

#### 异步刷新

将集中刷新和分散刷新的方式相结合，将128次刷新分散在2ms的时间内，每过一段时间，暂停读写，执行 1 次刷新（刷 1 行）
- 优点：死时间的分布更加分散，避免cpu连续等待过久的时间

{%note info%}

- 分散刷新是 “读写必带刷新”—— 只要用存储器，就必须同时承担刷新开销，每个周期都慢；

- 异步刷新是 “读写和刷新分离”—— 大部分时间读写都全速，刷新只在间隙插入，仅插空时影响。

{%endnote%}

动态存储器的刷新按行进行，为了减少刷新周期，可以减少存储矩阵的行数，增加列数

### 只读存储器rom

- 掩模式只读存储器mrom：在芯片生产过程中直接写入，写入后任何人都无法改变
  - 优点：可靠性高
  - 缺点：灵活性差
- 一次可编程只读存储器prom：允许用户一次性编程写入程序
- 可擦除可编程只读存储器eprom：用户可以写入还能进行多次修改，不能取代ram，因为编程次数有限，而且写入时间过长
- flash存储器 ：闪存，支持快速擦出和重写，写入前必须先擦除
- 固态硬盘ssd：基于闪存，价格较高



### 主存容量扩展

#### 位扩展 

存储介质：具有两种明显区别且稳定的物理状态（分别表示0和1） 通常使用半导体材料或者磁化材料

还是ssh快 给vercel配置域名 现在域名注册商处添加CNAME解析


 
总线

分类：

1. 内部总线：cpu内部
2. 系统总线：cpu同其他计算机系统的其他高速功能不限相互连接的总线
3. io总线

在任何时刻只可以有一个部件向总线上发送消息，但却可以有一个或多个部件接收消息



总线结构

组成：连接设备的信号线



数据总线的宽度决定连接到总线上的设备可能获得的最大性能

地址总线

控制总线

多个部件之间采用总线连接的方式，可大大降低部件间互联的复杂性，大幅度减少连接的数量

将多个部件之间的连接的多个控制接口变成了每个部件与总线间的一个连接接口，连接接口的器材量减少

如果有设备之间没有或者很少有多个部件同时进行信息交换，总线效率高（只需要提升总线，征用的问题容易被解决）



单总线结构

双总线结构：在cpu和主存专门设置了一组高速存储总线，使cpu通过专用总线与内存交换消息，减轻系统总线的负担

三总线结构：在双总线的基础上增加了io总线形成的


